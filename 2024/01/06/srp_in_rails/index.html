<!DOCTYPE html><html class="appearance-auto" lang="en"><head><meta charset="UTF-8"><title>The Single Responsibility Principle in Rails</title><meta name="description" content="The only limit is the one you set for yourself."><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, initial-scale=1"><!-- Google Analytics --><!-- End Google Analytics -->
<!-- Baidu Analytics --><!-- End Baidu Analytics --><link rel="icon" href="/images/favicon.ico"><link rel="stylesheet" href="/style/common/bulma.css"><link rel="stylesheet" href="/style/base.css"><link rel="stylesheet" href="/style/common/helper.css"><script src="/js/common.js"></script><link rel="stylesheet" href="/style/post.css"><link rel="stylesheet" href="/style/themes/highlight-theme-light.css"><link rel="stylesheet" href="/style/common/jquery.fancybox.min.css"><script src="/js/highlight.pack.js"></script><meta name="description" content="





The Single Responsibility Principle in Rails. Welcome, Rails developers! Today, we’re diving into the world of the Single Responsibility Principle (SRP), the first letter in the SOLID acronym. Get ready for an engaging journey filled with humor, insights, and practical examples for each layer of your Rails application.
What is the Single Responsibili.."><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
</head><body class="is-flex is-flex-direction-column"><header class="header-widget is-flex-shrink-0 is-hidden-mobile"><div class="container is-fullhd is-flex is-justify-content-space-between is-align-items-center is-full-height"><section class="is-hidden-mobile is-flex-shrink-0"><h2><a href="/">dohungthinhtin's blog</a></h2></section><h3 class="is-hidden-mobile is-family-serif is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">The Single Responsibility Principle in Rails</p><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">Click back to the top</p></div></h3><aside class="is-flex-shrink-0"></aside></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-center is-hidden-tablet"></header><main><main class="container is-max-widescreen content section post-page pt-4 px-4"><div class="columns is-flex-desktop is-justify-content-center is-flex-direction-row-reverse"><div class="column is-3 is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#The-Single-Responsibility-Principle-in-Rails"><span class="toc-text">The Single Responsibility Principle in Rails.</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#What-is-the-Single-Responsibility-Principle-SRP"><span class="toc-text">What is the Single Responsibility Principle (SRP)?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Why-is-SRP-Important"><span class="toc-text">Why is SRP Important?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SRP-in-Models"><span class="toc-text">SRP in Models</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Example-User-Model-with-Too-Many-Responsibilities"><span class="toc-text">Example: User Model with Too Many Responsibilities</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SRP-in-Controllers"><span class="toc-text">SRP in Controllers</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Example-UserController-with-Too-Many-Responsibilities"><span class="toc-text">Example: UserController with Too Many Responsibilities</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SRP-in-Views"><span class="toc-text">SRP in Views</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Example-View-with-Business-Logic"><span class="toc-text">Example: View with Business Logic</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SRP-in-Services"><span class="toc-text">SRP in Services</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Example-Payment-Processing-Service"><span class="toc-text">Example: Payment Processing Service</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Conclusion"><span class="toc-text">Conclusion</span></a></li></ol></li></ol></div><div class="column is-9"><header class="my-4"><a href="/tags/Ruby"><i class="tag post-item-tag">Ruby</i></a><a href="/tags/Rails"><i class="tag post-item-tag">Rails</i></a><a href="/tags/SOLID"><i class="tag post-item-tag">SOLID</i></a><a href="/tags/Software-Development"><i class="tag post-item-tag">Software-Development</i></a></header><h1 class="mt-0 mb-1 is-family-serif" id="postTitle">The Single Responsibility Principle in Rails</h1><time class="has-text-grey" datetime="2024-01-06T05:00:00.000Z">2024-01-06</time><article class="mt-2 post-content"><center>
<img src="/2024/01/06/srp_in_rails/single_responsibility.png" class="" title="single_responsibility">
</center>

<br>

<h2 id="The-Single-Responsibility-Principle-in-Rails"><a href="#The-Single-Responsibility-Principle-in-Rails" class="headerlink" title="The Single Responsibility Principle in Rails."></a>The Single Responsibility Principle in Rails.</h2><p> Welcome, Rails developers! Today, we’re diving into the world of the Single Responsibility Principle (SRP), the first letter in the SOLID acronym. Get ready for an engaging journey filled with humor, insights, and practical examples for each layer of your Rails application.</p>
<h3 id="What-is-the-Single-Responsibility-Principle-SRP"><a href="#What-is-the-Single-Responsibility-Principle-SRP" class="headerlink" title="What is the Single Responsibility Principle (SRP)?"></a>What is the Single Responsibility Principle (SRP)?</h3><p>The Single Responsibility Principle states that a class should have one, and only one, reason to change. This means that a class should only have one job or responsibility. Think of it as giving your class a clear job title. No one likes a job description that says, “Do everything.”</p>
<h3 id="Why-is-SRP-Important"><a href="#Why-is-SRP-Important" class="headerlink" title="Why is SRP Important?"></a>Why is SRP Important?</h3><p>Following SRP helps make your codebase more modular, easier to maintain, and less prone to bugs. It’s like having a well-organized kitchen where each utensil has a specific purpose. You wouldn’t use a spatula to cut vegetables, would you?</p>
<h3 id="SRP-in-Models"><a href="#SRP-in-Models" class="headerlink" title="SRP in Models"></a>SRP in Models</h3><p>Let’s start with models, the backbone of your Rails application. A model should handle database interactions and nothing more. But sometimes, models get burdened with extra responsibilities like validation, callbacks, or even business logic.</p>
<h4 id="Example-User-Model-with-Too-Many-Responsibilities"><a href="#Example-User-Model-with-Too-Many-Responsibilities" class="headerlink" title="Example: User Model with Too Many Responsibilities"></a>Example: User Model with Too Many Responsibilities</h4><p><strong>Before:</strong></p>
<pre><code class="ruby">class User &lt; ApplicationRecord
  def send_welcome_email
    # Code to send welcome email
  end

  def calculate_age
    # Code to calculate user&#39;s age
  end
end
</code></pre>
<p><strong>After:</strong></p>
<pre><code class="ruby">class User &lt; ApplicationRecord
end

class UserNotifier
  def initialize(user)
    @user = user
  end

  def send_welcome_email
    # Code to send welcome email
  end
end

class UserAgeCalculator
  def initialize(user)
    @user = user
  end

  def calculate_age
    # Code to calculate user&#39;s age
  end
end
</code></pre>
<p>Now, our <code>User</code> model can focus on database interactions, while <code>UserNotifier</code> and <code>UserAgeCalculator</code> handle their respective tasks. It’s like having a chef, a waiter, and a dishwasher each doing their own job.</p>
<h3 id="SRP-in-Controllers"><a href="#SRP-in-Controllers" class="headerlink" title="SRP in Controllers"></a>SRP in Controllers</h3><p>Controllers should handle HTTP requests and responses. However, they often get bogged down with business logic or data manipulation.</p>
<h4 id="Example-UserController-with-Too-Many-Responsibilities"><a href="#Example-UserController-with-Too-Many-Responsibilities" class="headerlink" title="Example: UserController with Too Many Responsibilities"></a>Example: UserController with Too Many Responsibilities</h4><p><strong>Before:</strong></p>
<pre><code class="ruby">class UsersController &lt; ApplicationController
  def create
    @user = User.new(user_params)
    if @user.save
      send_welcome_email(@user)
      render json: &#123; message: &#39;User created successfully&#39; &#125;, status: :created
    else
      render json: &#123; errors: @user.errors &#125;, status: :unprocessable_entity
    end
  end

  private

  def send_welcome_email(user)
    # Code to send welcome email
  end
end
</code></pre>
<p><strong>After:</strong></p>
<pre><code class="ruby">class UsersController &lt; ApplicationController
  def create
    @user = User.new(user_params)
    if @user.save
      UserNotifier.new(@user).send_welcome_email
      render json: &#123; message: &#39;User created successfully&#39; &#125;, status: :created
    else
      render json: &#123; errors: @user.errors &#125;, status: :unprocessable_entity
    end
  end
end
</code></pre>
<p>By moving the email sending logic to <code>UserNotifier</code>, our controller is now leaner and cleaner. It’s like having a sous-chef to handle the prep work so the head chef can focus on cooking.</p>
<h3 id="SRP-in-Views"><a href="#SRP-in-Views" class="headerlink" title="SRP in Views"></a>SRP in Views</h3><p>Views should display data and nothing more. Sometimes, we sneak in logic that doesn’t belong there.</p>
<h4 id="Example-View-with-Business-Logic"><a href="#Example-View-with-Business-Logic" class="headerlink" title="Example: View with Business Logic"></a>Example: View with Business Logic</h4><p><strong>Before:</strong></p>
<pre><code class="erb">&lt;% @users.each do |user| %&gt;
  &lt;p&gt;
    Name: &lt;%= user.name %&gt;&lt;br&gt;
    Age: &lt;%= user.age %&gt;
    &lt;% if user.age &gt;= 18 %&gt;
      &lt;span&gt;(Adult)&lt;/span&gt;
    &lt;% else %&gt;
      &lt;span&gt;(Minor)&lt;/span&gt;
    &lt;% end %&gt;
  &lt;/p&gt;
&lt;% end %&gt;
</code></pre>
<p><strong>After:</strong></p>
<pre><code class="erb">&lt;% @users.each do |user| %&gt;
  &lt;p&gt;
    Name: &lt;%= user.name %&gt;&lt;br&gt;
    Age: &lt;%= user.age %&gt;
    &lt;%= display_age_group(user) %&gt;
  &lt;/p&gt;
&lt;% end %&gt;
</code></pre>
<pre><code class="ruby">module UsersHelper
  def display_age_group(user)
    user.age &gt;= 18 ? &#39;&lt;span&gt;(Adult)&lt;/span&gt;&#39;.html_safe : &#39;&lt;span&gt;(Minor)&lt;/span&gt;&#39;.html_safe
  end
end
</code></pre>
<p>Moving the age group logic to a helper makes the view simpler and easier to maintain. It’s like putting the finishing touches on a dish without worrying about the recipe.</p>
<h3 id="SRP-in-Services"><a href="#SRP-in-Services" class="headerlink" title="SRP in Services"></a>SRP in Services</h3><p>Service objects are perfect for encapsulating complex business logic. They can be your secret weapon for keeping your models and controllers slim.</p>
<h4 id="Example-Payment-Processing-Service"><a href="#Example-Payment-Processing-Service" class="headerlink" title="Example: Payment Processing Service"></a>Example: Payment Processing Service</h4><p><strong>Before:</strong></p>
<pre><code class="ruby">class OrdersController &lt; ApplicationController
  def create
    @order = Order.new(order_params)
    if @order.save
      process_payment(@order)
      render json: &#123; message: &#39;Order created successfully&#39; &#125;, status: :created
    else
      render json: &#123; errors: @order.errors &#125;, status: :unprocessable_entity
    end
  end

  private

  def process_payment(order)
    # Code to process payment
  end
end
</code></pre>
<p><strong>After:</strong></p>
<pre><code class="ruby">class OrdersController &lt; ApplicationController
  def create
    @order = Order.new(order_params)
    if @order.save
      PaymentProcessor.new(@order).process
      render json: &#123; message: &#39;Order created successfully&#39; &#125;, status: :created
    else
      render json: &#123; errors: @order.errors &#125;, status: :unprocessable_entity
    end
  end
end
</code></pre>
<pre><code class="ruby">class PaymentProcessor
  def initialize(order)
    @order = order
  end

  def process
    # Code to process payment
  end
end
</code></pre>
<p>By moving the payment processing logic to a service object, our controller remains focused on handling HTTP requests. It’s like having a dedicated cashier while the sales staff handles customer service.</p>
<h3 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h3><p>The Single Responsibility Principle is all about giving each class a clear and focused job. By applying SRP to models, controllers, views, and services, you can keep your Rails application organized and maintainable. Remember, a well-organized kitchen makes for a happy chef!</p>
<p>Stay tuned for more tips on writing clean, efficient, and enjoyable Ruby on Rails code.</p>
<p>Thôi Lo Code Đi Kẻo Sếp nạt!</p>
</article><section class="jump-container is-flex is-justify-content-space-between my-6"><!-- em is empty placeholder--><a class="button is-default" href="/2024/01/07/ocp_in_rails_detailed/" title="The Open/Closed Principle in Rails - Extend Without Breaking a Sweat"><i class="iconfont icon-prev mr-2 has-text-grey"></i><span class="has-text-weight-semibold">Previous: The Open/Closed Principle in Rails - Extend Without Breaking a Sweat</span></a><a class="button is-default" href="/2024/01/05/solid_principles_in_rails_part2_fun/" title="SOLID Principles in Ruby on Rails - Part 2"><span class="has-text-weight-semibold">Next: SOLID Principles in Ruby on Rails - Part 2</span><i class="iconfont icon-next ml-2 has-text-grey"></i></a></section><article class="mt-6 comment-container"><script async repo="Haojen/Claudia-theme-blog" src="https://utteranc.es/client.js" issue-term="pathname" theme="preferred-color-scheme"></script></article></div></div></main></main><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0 is-family-serif"><section class="sns-container"><!-- Github--><a title="github" target="_blank" rel="noopener nofollow" href="//github.com/dohungthinhSTS"><i class="iconfont icon-github"></i></a><!-- Ins--><a title="instagram" target="_blank" rel="noopener nofollow" href="//www.instagram.com/thinhdohung/"><i class="iconfont icon-ins"></i></a><!-- RSS--><!-- 知乎--><!-- 领英--><a title="linkedin" target="_blank" rel="noopener nofollow" href="//www.linkedin.com/in/thinh-hung-a74943132/"><i class="iconfont icon-linkedin"></i></a><!-- 脸书--><a title="facebook" target="_blank" rel="noopener nofollow" href="//www.facebook.com/thinh.dohung/"><i class="iconfont icon-tian7_facebook"></i></a></section><p><span>Copyright ©</span><span> dohungthinhtin 2024</span></p><div class="is-flex is-justify-content-center is-flex-wrap-wrap"><p>Powered by Hexo &verbar;&nbsp;</p><p class="is-flex is-justify-content-center"></p></div><div><span></span></div></footer><script async defer src="https://buttons.github.io/buttons.js"></script><script src="/js/jquery-3.6.1.min.js"></script><script src="/js/jquery-fancybox.min.js"></script><script src="/js/img_zoom.js"></script><script src="/js/post.js"></script></body></html>