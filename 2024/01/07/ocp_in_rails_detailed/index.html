<!DOCTYPE html><html class="appearance-auto" lang="en"><head><meta charset="UTF-8"><title>Understanding the Open/Closed Principle with Real-World Examples</title><meta name="description" content="Sharing knowledge about software creation"><meta name="viewport" content="width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no,initial-scale=1"><link rel="icon" href="/images/favicon.ico"><link rel="stylesheet" href="/style/common/bulma.css"><link rel="stylesheet" href="/style/base.css"><link rel="stylesheet" href="/style/common/helper.css"><script src="/js/common.js"></script><link rel="stylesheet" href="/style/post.css"><link rel="stylesheet" href="/style/themes/highlight-theme-light.css"><link rel="stylesheet" href="/style/common/jquery.fancybox.min.css"><script src="/js/highlight.pack.js"></script><meta name="description" content="





Understanding the Open&amp;#x2F;Closed Principle with Real-World ExamplesHello, fellow software designers! Today, we’re diving into the Open&amp;#x2F;Closed Principle (OCP), another key principle in the SOLID design principles. The OCP ensures that our software components are flexible and maintainable by being open for extension but closed for modification. .."><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="DoHungThinhTin" type="application/atom+xml"></head><body class="is-flex is-flex-direction-column"><header class="header-widget is-flex-shrink-0 is-hidden-mobile"><div class="container is-fullhd is-flex is-justify-content-space-between is-align-items-center is-full-height"><section class="is-hidden-mobile is-flex-shrink-0"><h2><a href="/">dohungthinhtin's blog</a></h2></section><h3 class="is-hidden-mobile is-family-serif is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">Understanding the Open/Closed Principle with Real-World Examples</p><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">Click back to the top</p></div></h3><aside class="is-flex-shrink-0"></aside></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-center is-hidden-tablet"></header><main><main class="container is-max-widescreen content section post-page pt-4 px-4"><div class="columns is-flex-desktop is-justify-content-center is-flex-direction-row-reverse"><div class="column is-3 is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Understanding-the-Open-x2F-Closed-Principle-with-Real-World-Examples"><span class="toc-text">Understanding the Open&#x2F;Closed Principle with Real-World Examples</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#What-is-the-Open-x2F-Closed-Principle"><span class="toc-text">What is the Open&#x2F;Closed Principle?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Real-World-Analogy-Product-Offers-in-a-Store"><span class="toc-text">Real-World Analogy: Product Offers in a Store</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Violation-of-OCP"><span class="toc-text">Violation of OCP</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Correct-Example-Following-OCP"><span class="toc-text">Correct Example Following OCP</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Translating-OCP-into-Code"><span class="toc-text">Translating OCP into Code</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Explanation"><span class="toc-text">Explanation</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Benefits-of-Following-OCP"><span class="toc-text">Benefits of Following OCP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Trade-Offs-in-Applying-OCP"><span class="toc-text">Trade-Offs in Applying OCP</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Trade-Offs-of-Not-Following-OCP"><span class="toc-text">Trade-Offs of Not Following OCP</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Trade-Offs-of-Too-Rigid-Adherence-to-OCP"><span class="toc-text">Trade-Offs of Too Rigid Adherence to OCP</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Finding-the-Right-Balance"><span class="toc-text">Finding the Right Balance</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Conclusion"><span class="toc-text">Conclusion</span></a></li></ol></li></ol></div><div class="column is-9"><header class="my-4"><a href="/tags/Software-Design"><i class="tag post-item-tag">Software-Design</i></a><a href="/tags/Software-Development"><i class="tag post-item-tag">Software-Development</i></a><a href="/tags/SOLID-Principles"><i class="tag post-item-tag">SOLID-Principles</i></a><a href="/tags/Open-Closed-Principle"><i class="tag post-item-tag">Open-Closed-Principle</i></a></header><h1 class="mt-0 mb-1 is-family-serif" id="postTitle">Understanding the Open/Closed Principle with Real-World Examples</h1><time class="has-text-grey" datetime="2024-01-07T05:00:00.000Z">2024-01-07</time><article class="mt-2 post-content"><center><img src="/2024/01/07/ocp_in_rails_detailed/open_closed_principle.png" title="open_closed_principle"></center><br><h2 id="Understanding-the-Open-x2F-Closed-Principle-with-Real-World-Examples"><a href="#Understanding-the-Open-x2F-Closed-Principle-with-Real-World-Examples" class="headerlink" title="Understanding the Open&#x2F;Closed Principle with Real-World Examples"></a>Understanding the Open&#x2F;Closed Principle with Real-World Examples</h2><p>Hello, fellow software designers! Today, we’re diving into the <strong>Open&#x2F;Closed Principle (OCP)</strong>, another key principle in the SOLID design principles. The OCP ensures that our software components are flexible and maintainable by being open for extension but closed for modification. Let’s explore this concept with a real-world analogy and then translate it into a practical software example.</p><h3 id="What-is-the-Open-x2F-Closed-Principle"><a href="#What-is-the-Open-x2F-Closed-Principle" class="headerlink" title="What is the Open&#x2F;Closed Principle?"></a>What is the Open&#x2F;Closed Principle?</h3><p>The <strong>Open&#x2F;Closed Principle (OCP)</strong> states that <strong>a class should be open for extension but closed for modification</strong>. This means you should be able to extend the behavior of a class without changing its existing code. By doing so, you minimize the risk of introducing bugs into existing functionality and promote flexibility and maintainability.</p><h3 id="Real-World-Analogy-Product-Offers-in-a-Store"><a href="#Real-World-Analogy-Product-Offers-in-a-Store" class="headerlink" title="Real-World Analogy: Product Offers in a Store"></a>Real-World Analogy: Product Offers in a Store</h3><p>Consider a <strong>store</strong> that offers different types of discounts and promotions on its products:</p><ul><li><strong>Seasonal Discounts</strong>: Discounts that are available during specific seasons.</li><li><strong>Clearance Sales</strong>: Discounts on products that are being discontinued.</li><li><strong>Loyalty Discounts</strong>: Discounts for loyal customers based on their purchase history.</li></ul><h4 id="Violation-of-OCP"><a href="#Violation-of-OCP" class="headerlink" title="Violation of OCP"></a>Violation of OCP</h4><p>Imagine if the store had a single class, <strong>ProductOffer</strong>, responsible for handling all types of discounts and promotions:</p><pre><code class="ruby">class ProductOffer
  def calculate_discount(product, type)
    if type == &quot;seasonal&quot;
      # Apply seasonal discount
    elsif type == &quot;clearance&quot;
      # Apply clearance discount
    elsif type == &quot;loyalty&quot;
      # Apply loyalty discount
    else
      # No discount
    end
  end
end
</code></pre><p>This implementation violates the Open&#x2F;Closed Principle because:</p><ol><li><strong>Modification Required for New Discounts</strong>: Whenever a new discount type is introduced (e.g., “Black Friday Discount”), the <code>ProductOffer</code> class must be modified to accommodate it.</li><li><strong>High Risk of Bugs</strong>: Changes to the <code>calculate_discount</code> method can inadvertently affect existing discount logic, potentially introducing bugs.</li><li><strong>Reduced Flexibility</strong>: The <code>ProductOffer</code> class is tightly coupled to all types of discounts, making it harder to maintain and extend.</li></ol><h3 id="Correct-Example-Following-OCP"><a href="#Correct-Example-Following-OCP" class="headerlink" title="Correct Example Following OCP"></a>Correct Example Following OCP</h3><p>To adhere to the Open&#x2F;Closed Principle, we should design the system so that new types of discounts can be added without modifying the existing <code>ProductOffer</code> class. This can be achieved by using <strong>inheritance</strong> or <strong>composition</strong>.</p><h4 id="Translating-OCP-into-Code"><a href="#Translating-OCP-into-Code" class="headerlink" title="Translating OCP into Code"></a>Translating OCP into Code</h4><p>Here’s how to implement the OCP correctly:</p><ol><li>Define a base class or interface, <strong>DiscountStrategy</strong>, with a method <code>calculate_discount</code>.</li><li>Create separate classes for each discount type, extending the base class and implementing the <code>calculate_discount</code> method.</li></ol><pre><code class="ruby"># Base interface for discount strategies
class DiscountStrategy
  def calculate_discount(product)
    raise NotImplementedError, &quot;Subclasses must implement the calculate_discount method&quot;
  end
end

# Seasonal discount strategy
class SeasonalDiscount &lt; DiscountStrategy
  def calculate_discount(product)
    # Calculate seasonal discount
  end
end

# Clearance sale discount strategy
class ClearanceDiscount &lt; DiscountStrategy
  def calculate_discount(product)
    # Calculate clearance discount
  end
end

# Loyalty discount strategy
class LoyaltyDiscount &lt; DiscountStrategy
  def calculate_discount(product)
    # Calculate loyalty discount
  end
end

# ProductOffer uses discount strategies
class ProductOffer
  def initialize(discount_strategy)
    @discount_strategy = discount_strategy
  end

  def apply_discount(product)
    @discount_strategy.calculate_discount(product)
  end
end
</code></pre><h4 id="Explanation"><a href="#Explanation" class="headerlink" title="Explanation"></a>Explanation</h4><ul><li><strong>DiscountStrategy</strong>: An interface that defines the method <code>calculate_discount</code>, which each specific discount type must implement.</li><li><strong>Specific Discount Classes</strong>: <code>SeasonalDiscount</code>, <code>ClearanceDiscount</code>, and <code>LoyaltyDiscount</code> are subclasses that provide their own implementations of <code>calculate_discount</code>.</li><li><strong>ProductOffer</strong>: Uses a discount strategy and does not need to be modified when new discount types are added. New discount strategies can be added by creating new subclasses that extend <code>DiscountStrategy</code>.</li></ul><h3 id="Benefits-of-Following-OCP"><a href="#Benefits-of-Following-OCP" class="headerlink" title="Benefits of Following OCP"></a>Benefits of Following OCP</h3><ol><li><strong>Flexibility</strong>: New discount types can be added easily without changing existing code.</li><li><strong>Maintainability</strong>: Existing code is not modified, reducing the risk of introducing bugs.</li><li><strong>Scalability</strong>: The system can easily scale to accommodate new features or business requirements.</li></ol><h3 id="Trade-Offs-in-Applying-OCP"><a href="#Trade-Offs-in-Applying-OCP" class="headerlink" title="Trade-Offs in Applying OCP"></a>Trade-Offs in Applying OCP</h3><p>When applying the Open&#x2F;Closed Principle, there are trade-offs to consider:</p><h4 id="Trade-Offs-of-Not-Following-OCP"><a href="#Trade-Offs-of-Not-Following-OCP" class="headerlink" title="Trade-Offs of Not Following OCP"></a>Trade-Offs of Not Following OCP</h4><ol><li><strong>Code Fragility</strong>: Frequent changes to existing classes can introduce bugs.</li><li><strong>Lack of Extensibility</strong>: It is difficult to add new functionality without modifying existing code.</li><li><strong>High Coupling</strong>: A single class may become too tightly coupled with different types of functionality.</li></ol><h4 id="Trade-Offs-of-Too-Rigid-Adherence-to-OCP"><a href="#Trade-Offs-of-Too-Rigid-Adherence-to-OCP" class="headerlink" title="Trade-Offs of Too Rigid Adherence to OCP"></a>Trade-Offs of Too Rigid Adherence to OCP</h4><ol><li><p><strong>Over-Engineering</strong>: Creating too many small classes or strategies can lead to excessive complexity.</p><ul><li><strong>Example</strong>: If you create a separate class for every possible type of discount, the codebase may become cluttered and harder to navigate.</li></ul></li><li><p><strong>Performance Considerations</strong>: Using many small classes may introduce a slight performance overhead, especially if there are many method calls or object creations.</p></li><li><p><strong>Difficulty in Refactoring</strong>: Overuse of OCP might lead to difficulties when the business logic needs a substantial overhaul, as many classes would need to be changed or extended.</p></li></ol><h3 id="Finding-the-Right-Balance"><a href="#Finding-the-Right-Balance" class="headerlink" title="Finding the Right Balance"></a>Finding the Right Balance</h3><ol><li><strong>Pragmatic Use of Inheritance and Composition</strong>: Use inheritance and composition thoughtfully to achieve a balance between flexibility and simplicity.</li><li><strong>Focus on Business Requirements</strong>: Align the design with real business needs. Avoid over-engineering by focusing on the most likely areas of change.</li><li><strong>Refactor When Necessary</strong>: Don’t hesitate to refactor code when requirements evolve. OCP does not mean avoiding all modifications but rather structuring the code to minimize them.</li></ol><h3 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h3><p>The <strong>Open&#x2F;Closed Principle (OCP)</strong> helps create software that is easier to extend and maintain by encouraging designs that are open for extension but closed for modification. By applying OCP, you make your codebase more flexible, robust, and ready to accommodate future changes.</p><p>Whether you’re managing product offers in a store or developing complex software systems, adhering to OCP will help you build systems that are easier to adapt and grow with evolving business requirements.</p><p>Stay tuned for more insights into software design principles and patterns!</p><p><em>Thôi Lo Code Đi Kẻo Sếp nạt!!</em></p><hr></article><section class="jump-container is-flex is-justify-content-space-between my-6"><a class="button is-default" href="/2024/01/08/lsp_in_rails_detailed/" title="Understanding the Liskov Substitution Principle with Real-World Examples"><i class="iconfont icon-prev mr-2 has-text-grey"></i><span class="has-text-weight-semibold">Previous: Understanding the Liskov Substitution Principle with Real-World Examples</span></a><a class="button is-default" href="/2024/01/06/srp_in_rails/" title="Understanding the Single Responsibility Principle with Real-World Examples"><span class="has-text-weight-semibold">Next: Understanding the Single Responsibility Principle with Real-World Examples</span><i class="iconfont icon-next ml-2 has-text-grey"></i></a></section><article class="mt-6 comment-container"><script async repo="Haojen/Claudia-theme-blog" src="https://utteranc.es/client.js" issue-term="pathname" theme="preferred-color-scheme"></script></article></div></div></main></main><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0 is-family-serif"><section class="sns-container"><a title="github" target="_blank" rel="noopener nofollow" href="//github.com/dohungthinhSTS"><i class="iconfont icon-github"></i></a><a title="instagram" target="_blank" rel="noopener nofollow" href="//www.instagram.com/thinhdohung/"><i class="iconfont icon-ins"></i></a><a title="linkedin" target="_blank" rel="noopener nofollow" href="//www.linkedin.com/in/thinh-hung-a74943132/"><i class="iconfont icon-linkedin"></i></a><a title="facebook" target="_blank" rel="noopener nofollow" href="//www.facebook.com/thinh.dohung/"><i class="iconfont icon-tian7_facebook"></i></a></section><p><span>Copyright ©</span><span> dohungthinhtin 2024</span></p><div class="is-flex is-justify-content-center is-flex-wrap-wrap"><p>Powered by Hexo &verbar;&nbsp;</p><p class="is-flex is-justify-content-center"></p></div><div><span></span></div></footer><script async defer src="https://buttons.github.io/buttons.js"></script><script src="/js/jquery-3.6.1.min.js"></script><script src="/js/jquery-fancybox.min.js"></script><script src="/js/img_zoom.js"></script><script src="/js/post.js"></script></body></html>