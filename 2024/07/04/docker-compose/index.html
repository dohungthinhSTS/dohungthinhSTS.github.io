<!DOCTYPE html><html class="appearance-auto" lang="en"><head><meta charset="UTF-8"><title>Understanding Docker-Compose Configuration</title><meta name="description" content="The only limit is the one you set for yourself."><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, initial-scale=1"><!-- Google Analytics --><!-- End Google Analytics -->
<!-- Baidu Analytics --><!-- End Baidu Analytics --><link rel="icon" href="/images/favicon.ico"><link rel="stylesheet" href="/style/common/bulma.css"><link rel="stylesheet" href="/style/base.css"><link rel="stylesheet" href="/style/common/helper.css"><script src="/js/common.js"></script><link rel="stylesheet" href="/style/post.css"><link rel="stylesheet" href="/style/themes/highlight-theme-light.css"><link rel="stylesheet" href="/style/common/jquery.fancybox.min.css"><script src="/js/highlight.pack.js"></script><meta name="description" content="





What is Docker-Compose?Docker-Compose is a tool that simplifies the orchestration of multi-container Docker applications. It allows you to define your application stack in a docker-compose.yml file, specifying the services, networks, and volumes needed. With a single command, you can start, stop, and manage your entire application.
Key Benefits of Do.."><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
</head><body class="is-flex is-flex-direction-column"><header class="header-widget is-flex-shrink-0 is-hidden-mobile"><div class="container is-fullhd is-flex is-justify-content-space-between is-align-items-center is-full-height"><section class="is-hidden-mobile is-flex-shrink-0"><h2><a href="/">dohungthinhtin's blog</a></h2></section><h3 class="is-hidden-mobile is-family-serif is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">Understanding Docker-Compose Configuration</p><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">Click back to the top</p></div></h3><aside class="is-flex-shrink-0"></aside></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-center is-hidden-tablet"></header><main><main class="container is-max-widescreen content section post-page pt-4 px-4"><div class="columns is-flex-desktop is-justify-content-center is-flex-direction-row-reverse"><div class="column is-3 is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#What-is-Docker-Compose"><span class="toc-text">What is Docker-Compose?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Key-Benefits-of-Docker-Compose"><span class="toc-text">Key Benefits of Docker-Compose</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Basic-Structure-of-a-docker-compose-yml-File"><span class="toc-text">Basic Structure of a docker-compose.yml File</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Version"><span class="toc-text">Version</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Services"><span class="toc-text">Services</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Networks"><span class="toc-text">Networks</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Volumes"><span class="toc-text">Volumes</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Advanced-Docker-Compose-Configuration"><span class="toc-text">Advanced Docker-Compose Configuration</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Service-Dependencies"><span class="toc-text">Service Dependencies</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Health-Checks"><span class="toc-text">Health Checks</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Secrets-and-Configs"><span class="toc-text">Secrets and Configs</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Common-Commands"><span class="toc-text">Common Commands</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Starting-Services"><span class="toc-text">Starting Services</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Stopping-Services"><span class="toc-text">Stopping Services</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Viewing-Logs"><span class="toc-text">Viewing Logs</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Conclusion"><span class="toc-text">Conclusion</span></a></li></ol></li></ol></div><div class="column is-9"><header class="my-4"><a href="/tags/Docker"><i class="tag post-item-tag">Docker</i></a></header><h1 class="mt-0 mb-1 is-family-serif" id="postTitle">Understanding Docker-Compose Configuration</h1><time class="has-text-grey" datetime="2024-07-04T05:00:00.000Z">2024-07-04</time><article class="mt-2 post-content"><center>
<img src="/2024/07/04/docker-compose/docker_compose_avatar.png" class="" title="docker_compose_avatar">
</center>

<br>

<h2 id="What-is-Docker-Compose"><a href="#What-is-Docker-Compose" class="headerlink" title="What is Docker-Compose?"></a>What is Docker-Compose?</h2><p>Docker-Compose is a tool that simplifies the orchestration of multi-container Docker applications. It allows you to define your application stack in a <code>docker-compose.yml</code> file, specifying the services, networks, and volumes needed. With a single command, you can start, stop, and manage your entire application.</p>
<h2 id="Key-Benefits-of-Docker-Compose"><a href="#Key-Benefits-of-Docker-Compose" class="headerlink" title="Key Benefits of Docker-Compose"></a>Key Benefits of Docker-Compose</h2><ul>
<li><strong>Simplifies multi-container setups</strong>: Manage complex applications with multiple services effortlessly.</li>
<li><strong>Reproducible environments</strong>: Ensure consistent setups across different environments (development, testing, production).</li>
<li><strong>Easy orchestration</strong>: Streamline operations with commands to start, stop, and rebuild services.</li>
</ul>
<h2 id="Basic-Structure-of-a-docker-compose-yml-File"><a href="#Basic-Structure-of-a-docker-compose-yml-File" class="headerlink" title="Basic Structure of a docker-compose.yml File"></a>Basic Structure of a docker-compose.yml File</h2><p>A <code>docker-compose.yml</code> file consists of several key sections: <code>version</code>, <code>services</code>, <code>networks</code>, and <code>volumes</code>. Here’s a breakdown of each component:</p>
<h3 id="Version"><a href="#Version" class="headerlink" title="Version"></a>Version</h3><p>The <code>version</code> key specifies the Compose file format. It ensures compatibility with different Docker-Compose versions.</p>
<pre><code class="yaml">version: &#39;3.8&#39;
</code></pre>
<h3 id="Services"><a href="#Services" class="headerlink" title="Services"></a>Services</h3><p>The <code>services</code> section defines the individual containers that make up your application. Each service is a container, and you can specify its image, build context, ports, environment variables, and dependencies.</p>
<p><strong>Example</strong>:</p>
<pre><code class="yaml">services:
  web:
    image: nginx:latest
    ports:
      - &quot;80:80&quot;
  database:
    image: postgres:latest
    environment:
      POSTGRES_USER: example
      POSTGRES_PASSWORD: example
</code></pre>
<h2 id="Networks"><a href="#Networks" class="headerlink" title="Networks"></a>Networks</h2><p>The <code>networks</code> section defines the custom networks for your containers. By default, docker-Compose creates a network for your services, but you can also specify custom networks for advanced configurations.</p>
<p><strong>Example</strong>:</p>
<pre><code class="yaml">networks:
  frontend:
  backend:
</code></pre>
<h2 id="Volumes"><a href="#Volumes" class="headerlink" title="Volumes"></a>Volumes</h2><p>The <code>volumes</code> section defines named volumes that persist data across container restarts. Volumes are essential for storing database data, user uploads, and other persistent information.</p>
<p><strong>Example</strong>:</p>
<pre><code class="yaml">volumes:
  db-data:
</code></pre>
<h3 id="Advanced-Docker-Compose-Configuration"><a href="#Advanced-Docker-Compose-Configuration" class="headerlink" title="Advanced Docker-Compose Configuration"></a>Advanced Docker-Compose Configuration</h3><p>Beyond the basics, Docker-Compose supports advanced configurations to fine-tune your applications.</p>
<h2 id="Service-Dependencies"><a href="#Service-Dependencies" class="headerlink" title="Service Dependencies"></a>Service Dependencies</h2><p>Use the <code>depends_on</code> key to specify service dependencies, ensuring that services start in a particular order.</p>
<p><strong>Example</strong>:</p>
<pre><code class="yaml">services:
  web:
    depends_on:
      - database
</code></pre>
<h2 id="Health-Checks"><a href="#Health-Checks" class="headerlink" title="Health Checks"></a>Health Checks</h2><p>Define health checks to monitor the status of your services, ensuring they are running correctly.</p>
<p><strong>Example</strong>:</p>
<pre><code class="yaml">services:
  web:
    healthcheck:
      test: [&quot;CMD&quot;, &quot;curl&quot;, &quot;-f&quot;, &quot;http://localhost&quot;]
      interval: 30s
      timeout: 10s
      retries: 3
</code></pre>
<h2 id="Secrets-and-Configs"><a href="#Secrets-and-Configs" class="headerlink" title="Secrets and Configs"></a>Secrets and Configs</h2><p>Manage sensitive data and configuration files securely with the secrets and configs keys.</p>
<p><strong>Example</strong>:</p>
<pre><code class="yaml">services:
  web:
    secrets:
      - db_password

secrets:
  db_password:
    file: ./db_password.txt
</code></pre>
<h3 id="Common-Commands"><a href="#Common-Commands" class="headerlink" title="Common Commands"></a>Common Commands</h3><h2 id="Starting-Services"><a href="#Starting-Services" class="headerlink" title="Starting Services"></a>Starting Services</h2><p>To start your defined services, use the up command:</p>
<pre><code class="sh">docker-compose up -d
</code></pre>
<h2 id="Stopping-Services"><a href="#Stopping-Services" class="headerlink" title="Stopping Services"></a>Stopping Services</h2><p>To stop your services, use the down command:</p>
<pre><code class="sh">docker-compose down
</code></pre>
<h2 id="Viewing-Logs"><a href="#Viewing-Logs" class="headerlink" title="Viewing Logs"></a>Viewing Logs</h2><p>To view logs from your services, use the logs command:</p>
<pre><code class="sh">docker-compose logs -f
</code></pre>
<h3 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h3><p>Docker-Compose is an invaluable tool for managing multi-container Docker applications. By understanding its configuration and leveraging its features, you can streamline your development workflow and ensure consistent environments across different stages of your project. Start by defining your services, networks, and volumes, and explore advanced configurations to optimize your application’s performance and security.</p>
</article><section class="jump-container is-flex is-justify-content-space-between my-6"><!-- em is empty placeholder--><em></em><a class="button is-default" href="/2023/05/10/create-rails-by-docker/" title="Create Rails Project By Docker"><span class="has-text-weight-semibold">Next: Create Rails Project By Docker</span><i class="iconfont icon-next ml-2 has-text-grey"></i></a></section><article class="mt-6 comment-container"><script async repo="Haojen/Claudia-theme-blog" src="https://utteranc.es/client.js" issue-term="pathname" theme="preferred-color-scheme"></script></article></div></div></main></main><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0 is-family-serif"><section class="sns-container"><!-- Github--><a title="github" target="_blank" rel="noopener nofollow" href="//github.com/dohungthinhSTS"><i class="iconfont icon-github"></i></a><!-- Ins--><a title="instagram" target="_blank" rel="noopener nofollow" href="//www.instagram.com/thinhdohung/"><i class="iconfont icon-ins"></i></a><!-- RSS--><!-- 知乎--><!-- 领英--><a title="linkedin" target="_blank" rel="noopener nofollow" href="//www.linkedin.com/in/thinh-hung-a74943132/"><i class="iconfont icon-linkedin"></i></a><!-- 脸书--><a title="facebook" target="_blank" rel="noopener nofollow" href="//www.facebook.com/thinh.dohung/"><i class="iconfont icon-tian7_facebook"></i></a></section><p><span>Copyright ©</span><span> dohungthinhtin 2024</span></p><div class="is-flex is-justify-content-center is-flex-wrap-wrap"><p>Powered by Hexo &verbar;&nbsp;</p><p class="is-flex is-justify-content-center"></p></div><div><span></span></div></footer><script async defer src="https://buttons.github.io/buttons.js"></script><script src="/js/jquery-3.6.1.min.js"></script><script src="/js/jquery-fancybox.min.js"></script><script src="/js/img_zoom.js"></script><script src="/js/post.js"></script></body></html>